<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>Promise</title>
  </head>
  <body>
    <script>
      // 콜백 헬, 에러처리의 문제로 인해 ES6에 추가된 문법 : 프로미스
      // 프로미스도 결국 객체이며, 그 안에서 비동기 처리 상태와 결과를 관리함
      // pending → settled [fulfilled, rejected]
      const promiseGet = (url) => {
        return new Promise((resolve, reject) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', url);
          xhr.send();

          xhr.onload = () => {
            if (xhr.status === 200) {
              resolve(JSON.parse(xhr.response));
            } else {
              reject(new Error(xhr.status));
            }
          };
        });
      };

      promiseGet('https://jsonplaceholder.typicode.com/posts/1').then(
        console.log
      );
    </script>
  </body>
</html>
