<body>
  <script>
    // 비동기 로직의 결괏값을 처리하는 시점을 명확히 할 수 있도록 관리하는 객체
    // const promise = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     const random = Math.floor(Math.random() * 10);

    //     if (random % 2) resolve('홀수!');
    //     else reject(new Error('짝수!'));
    //   }, 1000);
    // });

    let values = [];

    const doA = () =>
      new Promise((resolve, reject) => {
        setTimeout(() => resolve(1), 500);
      });

    const doB = () =>
      new Promise((resolve, reject) => {
        setTimeout(() => resolve(2), 500);
      });

    const doC = () =>
      new Promise((resolve, reject) => {
        setTimeout(() => resolve(3), 500);
      });

    function sum() {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          const result = values.reduce((a, b) => a + b);
          resolve(result);
        }, 500);
      });
    }

    Promise.all([doA(), doB(), doC()]).then((data) => {
      console.log(data);
      values.push(data);
      return data;
    });

    // doA()
    //   .then((data) => {
    //     values.push(data);
    //     return doB();
    //   })
    //   .then((data) => {
    //     values.push(data);
    //     return doC();
    //   })
    //   .then((data) => {
    //     values.push(data);
    //     return sum();
    //   })
    //   .then(console.log);
  </script>
</body>
